<!doctype html>
<html>
<head>
  <title>ZS3 lattice operation</title>
  <style>
  canvas {
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
  }
  </style>
</head>
<body>
  <h1>Interactive visualization of the $\mathbb{Z}S_3$-action on the natural lattice</h1>
  <p>Brought to you by Hendrik Roehm and Leo Margolis. Code available at <a href="https://github.com/HendrikRoehm/ZS3-visualization">github</a>, contributions are welcome.</p>
  <p> The symmetric group $S_3$ acting on three elements is the symmetry group of the equilateral triangle, fixing the center of this triangle. Extending this action lineraly on the integral group ring $\mathbb{Z}S_3$ we obtain an action on the hexagonal lattice spanned by this triangle. This discription was used in <a href = "http://www.math.ualberta.ca/people/Faculty/Sehgal/publications/086.pdf"> an article by Marciniak and Sehgal </a> to describe the unit group of $\mathbb{Z}S_3$ explicitly. See also <a href="http://www.igt.uni-stuttgart.de/LstDiffgeo/Hertweck/preprints/ZS3_MaSe.pdf"> an article of Hertweck </a> where the same is described and illustrated in more detail.</p>	

  <canvas id="lattice" width="500" height="500"></canvas>
  <p>Type in an element of ZS3 (such as e+t-tt-2s+2stt) and press enter.</p>
  <p>
    <div>
      <input type="text" id="input" style="width: 300px">
      <input type="button" value="operate" onclick="operate();">
      <input type="button" value="reset" onclick="reset();">
    </div>
    <div id="error"></div>
  </p>
Notation: Let the blue corner correspond to 1, the green to 2 and the red to 3. Then we denote e = id, s = (1,2), t = (1,2,3), tt = (1,3,2), st = (1,3), stt = (2,3).
  <p>
    <div>Options: </div>
    The options are there anyway. So why not let the user adjust them?
  </p>
  <p>
    <div>History:</div>
    <ul id="history"></ul>
  </p>

<h1> Examples </h1>
<p> Here we might put some preprogrammed examples with buttons. Let's do one for starters and the rest we can fill by adjusting. They might also look good to the right of the animation.</p>

  <h1>Description</h1>
  <p>To be done</p>
  <script src="bundle.js"></script>
  <script>
    var canvas = document.getElementById("lattice");
    var textContainer = document.getElementById("latticeText");
    var inputContainer = document.getElementById("input");
    var historyContainer = document.getElementById("history");
    var errorContainer = document.getElementById("error");
    var lattice = new Lattice(canvas, {
      gap: 30,
      pointsPerDirection: 50,
      animationSpeed: 1
    });

    function historyAdd(coeff) {
      var text = "";
      Object.keys(coeff).forEach(function (basis) {
        var factor = coeff[basis];
        if (!factor) {
          return;
        }

        var factorAbs = Math.abs(factor);
        var factorText = factorAbs === 1 ? "" : factorAbs;
        var sign = factor > 0 ? " + " : " - ";
        text += sign + factorText + basis;
      })
      if (text === "") {
        text = "0e";
      } else if (text.slice(0, 3) === " + ") {
        text = text.slice(3);
      }

      var entry = document.createElement("li");
      entry.innerText = text;
      historyContainer.appendChild(entry);
    }

    function operate() {
      errorContainer.innerText = "";
      var input = inputContainer.value;
      if (input === "") {
        return;
      }
      var parsedInput = coeffFrom(input);
      var coeff = parsedInput.coeff;
      var errors = parsedInput.errors;
      if (errors && errors.length > 0) {
        errors.forEach(function (error) {
          var entry = document.createElement("div");
          entry.innerText = error;
          errorContainer.appendChild(entry);
        })
      } else {
        historyAdd(coeff);
        lattice.operateWith(coeff);
        inputContainer.value = "";
      }
    }

    function reset() {
      lattice.reset();
      historyContainer.innerHTML = "";
    }

    inputContainer.addEventListener("keyup", function(event) {
      // Number 13 is the "Enter" key on the keyboard
      if (event.keyCode === 13) {
        operate();
      }
    });
  </script>
</body>
</html>
